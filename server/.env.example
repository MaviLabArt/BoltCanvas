# --- General server config ---
# Default here is suitable for production deployments.
# For local testing, you can change NODE_ENV to "development" and point CORS_ORIGIN to your dev URL.
NODE_ENV=production
PORT=8080
# Comma-separated list of allowed frontend origins.
# Change this to your real domain(s) in production, e.g. https://shop.example.com
CORS_ORIGIN=http://localhost:8080,http://127.0.0.1:8080,https://shop.example.com
SESSION_SECRET=replace-with-long-random-string
# this is the password you are asked to access /admin dashboard
ADMIN_PIN=1234
# Set ADMIN_LANG either to English (en) or Italian (it)
ADMIN_LANG=en
# You can point this into a different path
DB_FILE=shop.db

# --- Choose payment provider: blink (default), lnd, or btcpay ---
PAYMENT_PROVIDER=blink
# --- On-chain (if blink or lnd is selected it will work via Boltz Submarine swaps) ---
ONCHAIN_ENABLED=true
# Minimum sats to allow on-chain alongside Lightning (e.g. 200000)
ONCHAIN_MIN_SATS=0
# Invoice expiry (seconds) when creating on-chain swaps; longer helps confirmations
ONCHAIN_INVOICE_EXPIRES_IN=7200


# Boltz endpoints (mainnet defaults)
BOLTZ_REST_URL=https://api.boltz.exchange
BOLTZ_WS_URL=wss://api.boltz.exchange/v2/ws
# Optional: webhook for swap updates (HTTPS, public)
#BOLTZ_WEBHOOK_URL=https://shop.example.com/api/webhooks/boltz
# Optional: shared secret to validate Boltz webhook payloads (sent via X-Boltz-Secret or ?token=)
#BOLTZ_WEBHOOK_SECRET=replace-with-long-random-string
# Optional: force IPv4 if your host has IPv6 routing issues (0/1)
#BOLTZ_FORCE_IPV4=1

# --- Blink credentials, generate api key from https://dashboard.blink.sv/api-keys---
BLINK_GRAPHQL_URL=https://api.blink.sv/graphql
BLINK_WS_URL=wss://ws.blink.sv/graphql
BLINK_API_KEY=
BLINK_INVOICE_EXPIRES_IN=900

# --- BTCPay Server (when PAYMENT_PROVIDER=btcpay) ---
BTCPAY_URL=https://btcpay.example.com
BTCPAY_API_KEY=
BTCPAY_STORE_ID=
# Secret shown when you create the webhook in BTCPay; used to verify BTCPay-Sig
BTCPAY_WEBHOOK_SECRET=
# Optional: override payment method ids if your BTCPay uses different names (older versions)
# BTCPAY WEBHOOK: in BTC PAY SERVER Webhook settings, define https://shop.example.com/api/webhooks/btcpay , unless you change the path below
#BTCPAY_WEBHOOK_PATH=/api/webhooks/btcpay

# --- LND (optional, when PAYMENT_PROVIDER=lnd) ---
#LND_REST_URL=https://lnd.example.com:8080
#LND_MACAROON_HEX=
#LND_TLS_INSECURE=0
#LND_TLS_CERT_PATH=
#LND_INVOICE_EXPIRES_IN=900
#LND_PRIVATE_INVOICES=true
#LND_WS_URL=wss://lnd.example.com:8080
#LND_ONCHAIN_ADDR_TYPE=p2wkh
#LND_ONCHAIN_MIN_CONFIRMATIONS=1

# --- Order notifications (optional) ---
NTFY_URL=https://ntfy.sh
NTFY_TOPIC=
#NTFY_USER=
#NTFY_PASSWORD=
#NTFY_PRIORITY=high
#NTFY_TITLE_PREFIX=

# --- Nostr keys (this is for sending NOSTR DMs and NOSTR teasers) ---
# Required: each store needs its own key so Nostr comments are namespaced and signed
SHOP_NOSTR_NSEC=
NOSTR_RELAYS_CSV=wss://relay.damus.io,wss://nos.lol
DM_DEDUP_TTL_MS=300000
# Cache Nostr comment proofs per product (ms)
#COMMENT_PROOF_TTL_MS=60000

# --- Email / SMTP (optional, to DM status updates) ---
SMTP_ENABLED=false
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM_NAME=Lightning Shop
SMTP_FROM_ADDRESS=hello@example.com
SMTP_ENVELOPE_FROM=hello@example.com
SMTP_REPLY_TO=hello@example.com
SMTP_SAVE_TO_SENT=false
IMAP_HOST=
IMAP_PORT=993
IMAP_SECURE=true
IMAP_USER=
IMAP_PASS=
IMAP_MAILBOX=Sent
